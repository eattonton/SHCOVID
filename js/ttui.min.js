class UIBase{constructor(t){this.divBg=null,this.htmlObj=null,this.params=t||{text:"..."}}Show(){this.divBg=$T.Create(),$T.Attribute(this.divBg,"id","divBg"),$T.ClassN(this.divBg,"graybg"),$T.Add(this.divBg)}Close(){$T.Del(this.divBg)}}UIBase.prototype.Create=function(t){return document.createElement(t||"div")},UIBase.prototype.Add=function(t,s){s=s||document.body,t instanceof UIBase?s.append(t.htmlObj):s.append(t)},UIBase.prototype.Attribute=function(t,s,e){t.setAttribute(s,e)},UIBase.prototype.ClassN=function(t,s){t instanceof UIBase?t.htmlObj.className+=s+" ":t.className+=s+" "},UIBase.prototype.Del=function(t){if(t){let s=t.parentNode;s.removeChild(t)}},UIBase.prototype.Html=function(t,s){t.innerHTML=s},UIBase.prototype.Click=function(t,s,e){t.addEventListener("click",function(t){t.preventDefault(),"function"==typeof e?e.bind(s)():"string"==typeof e&&s[e]()},!1)};var $T=new UIBase;class TextBox extends UIBase{constructor(t){super(t),console.log(t),this.Create()}Create(){this.htmlObj=$T.Create(),$T.ClassN(this.htmlObj,"textbox"),$T.Html(this.htmlObj,this.params.text||"...")}}class Button extends UIBase{constructor(t){super(t),this.Create()}Create(){this.htmlObj=$T.Create(),$T.ClassN(this.htmlObj,"button"),$T.Html(this.htmlObj,this.params.text||"but"),$T.Click(this.htmlObj,this,this.params.click||this.btnRun)}btnRun(){console.log("ui button")}}class ImagePanel extends UIBase{constructor(t){super(t),this.canvas=null,this.ctx=null,this.width=this.params.width||300,this.height=this.params.height||100,this.Create()}Create(){this.htmlObj=$T.Create("canvas"),this.canvas=this.htmlObj,$T.ClassN(this.canvas,"imagepanel"),this.ctx=this.canvas.getContext("2d")}DrawL(){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle="red",this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.stroke(),this.ctx.restore()}DrawImage(t){let s=this,e=new Image;e.src=t,e.onload=function(){s.ctx.drawImage(e,0,0)}}DrawImageData(t){this.ctx.putImageData(t,0,0)}GetPNG(){return this.canvas.toDataURL("image/png")}}class Dialog extends UIBase{constructor(t){super(t),this.divForm=null}Show(){super.Show(),this.divForm=$T.Create(),$T.Attribute(this.divForm,"id","dlgForm"),$T.ClassN(this.divForm,"form");let t=$T.Create();$T.ClassN(t,"title"),$T.Html(t,"标题"),$T.Add(t,this.divForm);let s=$T.Create();if($T.ClassN(s,"close"),$T.Html(s,"X"),$T.Click(s,this,"Close"),$T.Add(s,t),this.params.content instanceof UIBase)$T.ClassN(this.params.content,"content"),$T.Add(this.params.content,this.divForm);else{let t=new TextBox({text:this.params.text||"上传中..."});$T.ClassN(t,"content"),$T.Add(t,this.divForm)}let e=$T.Create();$T.ClassN(e,"buttons"),$T.Add(e,this.divForm);let i=new Button({text:"Ok",click:t=>{this.btnOk()}});$T.Add(i,e);let a=new Button({text:"Cancel",click:t=>{this.btnCancel()}});$T.Add(a,e),$T.Add(this.divForm)}Close(){super.Close(),$T.Del(this.divForm)}btnOk(){this.Close()}btnCancel(){this.Close()}}class Toast extends UIBase{constructor(t){super(t),this.divForm=null}Show(){super.Show(),this.divForm=$T.Create("div"),$T.Attribute(this.divForm,"id","dlgForm"),$T.ClassN(this.divForm,"form"),$T.Html(this.divForm,this.params.text),this.divForm.style.height="100px",this.divForm.style.width="100px",$T.Add(this.divForm)}Close(){super.Close(),$T.Del(this.divForm)}}